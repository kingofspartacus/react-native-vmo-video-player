{"version":3,"sources":["use-vmo-video-player.ts"],"names":["useCallback","useRef","useState","Platform","findNodeHandle","NativeModules","resolveAssetSource","VideoResizeMode","stringsOnlyObject","useVmoVideoPlayer","props","showPoster","setShowPoster","refVideo","setNativeProps","nativeProps","current","seek","time","tolerance","isNaN","Error","OS","presentFullscreenPlayer","fullscreen","dismissFullscreenPlayer","save","options","VideoManager","restoreUserInterfaceForPictureInPictureStopCompleted","restored","restoreUserInterfaceForPIPStopCompletionHandler","onVideoLoadStart","event","onLoadStart","nativeEvent","onVideoLoad","onLoad","onVideoError","onError","onVideoProgress","onProgress","onVideoBandwidthUpdate","onBandwidthUpdate","onVideoSeek","onSeek","onVideoEnd","onEnd","onTimedMetadata","onVideoFullscreenPlayerWillPresent","onFullscreenPlayerWillPresent","onVideoFullscreenPlayerDidPresent","onFullscreenPlayerDidPresent","onVideoFullscreenPlayerWillDismiss","onFullscreenPlayerWillDismiss","onVideoFullscreenPlayerDidDismiss","onFullscreenPlayerDidDismiss","onReadyForDisplay","audioOnly","prev","onPlaybackStalled","onPlaybackResume","onPlaybackRateChange","onVideoExternalPlaybackChange","onExternalPlaybackChange","onAudioBecomingNoisy","onAudioBecomingNoisyfnc","onPictureInPictureStatusChanged","onRestoreUserInterfaceForPictureInPictureStop","onAudioFocusChanged","onVideoBuffer","onBuffer","onGetLicense","drm","getLicense","Function","data","spc","getLicenseOverride","contentId","spcBase64","getLicensePromise","Promise","resolve","then","result","undefined","setLicenseResult","setLicenseError","catch","error","getViewManagerConfig","viewManagerName","UIManager","resizeMode","source","shouldCache","__packager_asset","uri","match","console","warn","isNetwork","isAsset","nativeResizeMode","VideoPlayerInstance","stretch","Constants","ScaleToFill","contain","ScaleAspectFit","cover","ScaleAspectFill","ScaleNone","Object","assign","style","overflow","src","type","mainVer","patchVer","requestHeaders","headers","onVideoAudioBecomingNoisy"],"mappings":"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","sourcesContent":["import { useCallback, useRef, useState } from 'react';\nimport { Platform, findNodeHandle, NativeModules } from 'react-native';\n// @ts-ignore\nimport resolveAssetSource from 'react-native/Libraries/Image/resolveAssetSource';\nimport VideoResizeMode from './video-resize-mode';\nimport { stringsOnlyObject } from './utils/string-helper';\n\nexport function useVmoVideoPlayer(props: any) {\n  const [showPoster, setShowPoster] = useState(!!props?.showPoster);\n  const refVideo = useRef<any>(null);\n\n  const setNativeProps = useCallback((nativeProps) => {\n    refVideo.current?.setNativeProps(nativeProps);\n  }, []);\n\n  const seek = useCallback(\n    (time, tolerance = 100) => {\n      if (isNaN(time)) {\n        throw new Error('Specified time is not a number');\n      }\n\n      if (Platform.OS === 'ios') {\n        setNativeProps({\n          seek: {\n            time,\n            tolerance,\n          },\n        });\n      } else {\n        setNativeProps({ seek: time });\n      }\n    },\n    [setNativeProps]\n  );\n\n  const presentFullscreenPlayer = useCallback(() => {\n    setNativeProps({ fullscreen: true });\n  }, [setNativeProps]);\n\n  const dismissFullscreenPlayer = useCallback(() => {\n    setNativeProps({ fullscreen: false });\n  }, [setNativeProps]);\n\n  const save = useCallback(\n    () => async (options = {}) => {\n      return await NativeModules.VideoManager.save(\n        options,\n        findNodeHandle(refVideo.current)\n      );\n    },\n    []\n  );\n\n  const restoreUserInterfaceForPictureInPictureStopCompleted = useCallback(\n    (restored) => {\n      setNativeProps({\n        restoreUserInterfaceForPIPStopCompletionHandler: restored,\n      });\n    },\n    [setNativeProps]\n  );\n\n  const onVideoLoadStart = useCallback(\n    (event) => {\n      props?.onLoadStart?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoLoad = useCallback(\n    (event) => {\n      props?.onLoad?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoError = useCallback(\n    (event) => {\n      props?.onError?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoProgress = useCallback(\n    (event) => {\n      props?.onProgress?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoBandwidthUpdate = useCallback(\n    (event) => {\n      props?.onBandwidthUpdate?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoSeek = useCallback(\n    (event) => {\n      props?.onSeek?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoEnd = useCallback(\n    (event) => {\n      props?.onEnd?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onTimedMetadata = useCallback(\n    (event) => {\n      props?.onTimedMetadata?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoFullscreenPlayerWillPresent = useCallback(\n    (event) => {\n      props?.onFullscreenPlayerWillPresent?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoFullscreenPlayerDidPresent = useCallback(\n    (event) => {\n      props?.onFullscreenPlayerDidPresent?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoFullscreenPlayerWillDismiss = useCallback(\n    (event) => {\n      props?.onFullscreenPlayerWillDismiss?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoFullscreenPlayerDidDismiss = useCallback(\n    (event) => {\n      props?.onFullscreenPlayerDidDismiss?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onReadyForDisplay = useCallback(\n    (event) => {\n      if (props.audioOnly && showPoster) {\n        setShowPoster((prev: any) => ({ ...prev, showPoster: false }));\n      } else {\n        props?.onReadyForDisplay?.(event.nativeEvent);\n      }\n    },\n    [props, showPoster]\n  );\n\n  const onPlaybackStalled = useCallback(\n    (event) => {\n      props?.onPlaybackStalled?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onPlaybackResume = useCallback(\n    (event) => {\n      props?.onPlaybackResume?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onPlaybackRateChange = useCallback(\n    (event) => {\n      props?.onPlaybackRateChange?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoExternalPlaybackChange = useCallback(\n    (event) => {\n      props?.onExternalPlaybackChange?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onAudioBecomingNoisy = useCallback(() => {\n    props?.onAudioBecomingNoisyfnc?.();\n  }, [props]);\n\n  const onPictureInPictureStatusChanged = useCallback(\n    (event) => {\n      props?.onPictureInPictureStatusChanged?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onRestoreUserInterfaceForPictureInPictureStop = useCallback(\n    (event) => {\n      props?.onRestoreUserInterfaceForPictureInPictureStop?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onAudioFocusChanged = useCallback(\n    (event) => {\n      props?.onAudioFocusChanged?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoBuffer = useCallback(\n    (event) => {\n      props?.onBuffer?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onGetLicense = useCallback(\n    (event) => {\n      if (props.drm && props.drm.getLicense instanceof Function) {\n        const data = event.nativeEvent;\n        if (data && data.spc) {\n          const getLicenseOverride = props.drm.getLicense(\n            data.spc,\n            data.contentId,\n            data.spcBase64,\n            props\n          );\n          const getLicensePromise = Promise.resolve(getLicenseOverride); // Handles both scenarios, getLicenseOverride being a promise and not.\n          getLicensePromise\n            .then((result) => {\n              if (result !== undefined) {\n                NativeModules.VideoManager.setLicenseResult(\n                  result,\n                  findNodeHandle(refVideo.current)\n                );\n              } else {\n                NativeModules.VideoManager.setLicenseError &&\n                  NativeModules.VideoManager.setLicenseError(\n                    'Empty license result',\n                    findNodeHandle(refVideo.current)\n                  );\n              }\n            })\n            .catch((error) => {\n              NativeModules.VideoManager.setLicenseError &&\n                NativeModules.VideoManager.setLicenseError(\n                  error,\n                  findNodeHandle(refVideo.current)\n                );\n            });\n        } else {\n          NativeModules.VideoManager.setLicenseError &&\n            NativeModules.VideoManager.setLicenseError(\n              'No spc received',\n              findNodeHandle(refVideo.current)\n            );\n        }\n      }\n    },\n    [props]\n  );\n\n  const getViewManagerConfig = useCallback((viewManagerName) => {\n    if (!NativeModules.UIManager.getViewManagerConfig) {\n      return NativeModules.UIManager[viewManagerName];\n    }\n    return NativeModules.UIManager.getViewManagerConfig(viewManagerName);\n  }, []);\n\n  const resizeMode = props?.resizeMode;\n  const source = resolveAssetSource(props?.source) || {};\n  const shouldCache = !source?.__packager_asset;\n\n  let uri = source.uri || '';\n  if (uri && uri.match(/^\\//)) {\n    uri = `file://${uri}`;\n  }\n\n  if (!uri) {\n    console.warn('Trying to load empty source.');\n  }\n\n  const isNetwork = !!(uri && uri.match(/^https?:/));\n  const isAsset = !!(\n    uri &&\n    uri.match(/^(assets-library|ipod-library|file|content|ms-appx|ms-appdata):/)\n  );\n\n  let nativeResizeMode;\n  const VideoPlayerInstance = getViewManagerConfig('VideoPlayer');\n\n  if (resizeMode === VideoResizeMode.stretch) {\n    nativeResizeMode = VideoPlayerInstance.Constants.ScaleToFill;\n  } else if (resizeMode === VideoResizeMode.contain) {\n    nativeResizeMode = VideoPlayerInstance.Constants.ScaleAspectFit;\n  } else if (resizeMode === VideoResizeMode.cover) {\n    nativeResizeMode = VideoPlayerInstance.Constants.ScaleAspectFill;\n  } else {\n    nativeResizeMode = VideoPlayerInstance.Constants.ScaleNone;\n  }\n\n  const nativeProps = Object.assign({}, props);\n  Object.assign(nativeProps, {\n    style: [\n      {\n        overflow: 'hidden',\n      },\n      nativeProps?.style,\n    ],\n    resizeMode: nativeResizeMode,\n    src: {\n      uri,\n      isNetwork,\n      isAsset,\n      shouldCache,\n      type: source.type || '',\n      mainVer: source.mainVer || 0,\n      patchVer: source.patchVer || 0,\n      requestHeaders: source.headers ? stringsOnlyObject(source.headers) : {},\n    },\n    onVideoLoadStart,\n    onVideoLoad,\n    onVideoError,\n    onVideoProgress,\n    onVideoSeek,\n    onVideoEnd,\n    onVideoBuffer,\n    onVideoBandwidthUpdate,\n    onTimedMetadata,\n    onVideoAudioBecomingNoisy: onAudioBecomingNoisy,\n    onVideoExternalPlaybackChange,\n    onVideoFullscreenPlayerWillPresent,\n    onVideoFullscreenPlayerDidPresent,\n    onVideoFullscreenPlayerWillDismiss,\n    onVideoFullscreenPlayerDidDismiss,\n    onReadyForDisplay,\n    onPlaybackStalled,\n    onPlaybackResume,\n    onPlaybackRateChange,\n    onAudioFocusChanged,\n    onAudioBecomingNoisy,\n    onGetLicense:\n      nativeProps.drm && nativeProps?.drm?.getLicense && onGetLicense,\n    onPictureInPictureStatusChanged,\n    onRestoreUserInterfaceForPictureInPictureStop,\n  });\n\n  return {\n    nativeProps,\n    seek,\n    save,\n    presentFullscreenPlayer,\n    dismissFullscreenPlayer,\n    restoreUserInterfaceForPictureInPictureStopCompleted,\n    refVideo,\n    showPoster,\n  };\n}\n"]}