{"version":3,"sources":["use-vmo-video-player.ts"],"names":["useVmoVideoPlayer","props","showPoster","setShowPoster","refVideo","setNativeProps","nativeProps","current","seek","time","tolerance","isNaN","Error","Platform","OS","presentFullscreenPlayer","fullscreen","dismissFullscreenPlayer","save","options","NativeModules","VideoManager","restoreUserInterfaceForPictureInPictureStopCompleted","restored","restoreUserInterfaceForPIPStopCompletionHandler","onVideoLoadStart","event","onLoadStart","nativeEvent","onVideoLoad","onLoad","onVideoError","onError","onVideoProgress","onProgress","onVideoBandwidthUpdate","onBandwidthUpdate","onVideoSeek","onSeek","onVideoEnd","onEnd","onTimedMetadata","onVideoFullscreenPlayerWillPresent","onFullscreenPlayerWillPresent","onVideoFullscreenPlayerDidPresent","onFullscreenPlayerDidPresent","onVideoFullscreenPlayerWillDismiss","onFullscreenPlayerWillDismiss","onVideoFullscreenPlayerDidDismiss","onFullscreenPlayerDidDismiss","onReadyForDisplay","audioOnly","prev","onPlaybackStalled","onPlaybackResume","onPlaybackRateChange","onVideoExternalPlaybackChange","onExternalPlaybackChange","onAudioBecomingNoisy","onAudioBecomingNoisyfnc","onPictureInPictureStatusChanged","onRestoreUserInterfaceForPictureInPictureStop","onAudioFocusChanged","onVideoBuffer","onBuffer","onGetLicense","drm","getLicense","Function","data","spc","getLicenseOverride","contentId","spcBase64","getLicensePromise","Promise","resolve","then","result","undefined","setLicenseResult","setLicenseError","catch","error","getViewManagerConfig","viewManagerName","UIManager","resizeMode","source","shouldCache","__packager_asset","uri","match","console","warn","isNetwork","isAsset","nativeResizeMode","VideoPlayerInstance","VideoResizeMode","stretch","Constants","ScaleToFill","contain","ScaleAspectFit","cover","ScaleAspectFill","ScaleNone","Object","assign","style","overflow","src","type","mainVer","patchVer","requestHeaders","headers","onVideoAudioBecomingNoisy"],"mappings":"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","sourcesContent":["import { useCallback, useRef, useState } from 'react';\nimport { Platform, findNodeHandle, NativeModules } from 'react-native';\n// @ts-ignore\nimport resolveAssetSource from 'react-native/Libraries/Image/resolveAssetSource';\nimport VideoResizeMode from './video-resize-mode';\nimport { stringsOnlyObject } from './utils/string-helper';\n\nexport function useVmoVideoPlayer(props: any) {\n  const [showPoster, setShowPoster] = useState(!!props?.showPoster);\n  const refVideo = useRef<any>(null);\n\n  const setNativeProps = useCallback((nativeProps) => {\n    refVideo.current?.setNativeProps(nativeProps);\n  }, []);\n\n  const seek = useCallback(\n    (time, tolerance = 100) => {\n      if (isNaN(time)) {\n        throw new Error('Specified time is not a number');\n      }\n\n      if (Platform.OS === 'ios') {\n        setNativeProps({\n          seek: {\n            time,\n            tolerance,\n          },\n        });\n      } else {\n        setNativeProps({ seek: time });\n      }\n    },\n    [setNativeProps]\n  );\n\n  const presentFullscreenPlayer = useCallback(() => {\n    setNativeProps({ fullscreen: true });\n  }, [setNativeProps]);\n\n  const dismissFullscreenPlayer = useCallback(() => {\n    setNativeProps({ fullscreen: false });\n  }, [setNativeProps]);\n\n  const save = useCallback(\n    () => async (options = {}) => {\n      return await NativeModules.VideoManager.save(\n        options,\n        findNodeHandle(refVideo.current)\n      );\n    },\n    []\n  );\n\n  const restoreUserInterfaceForPictureInPictureStopCompleted = useCallback(\n    (restored) => {\n      setNativeProps({\n        restoreUserInterfaceForPIPStopCompletionHandler: restored,\n      });\n    },\n    [setNativeProps]\n  );\n\n  const onVideoLoadStart = useCallback(\n    (event) => {\n      props?.onLoadStart?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoLoad = useCallback(\n    (event) => {\n      props?.onLoad?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoError = useCallback(\n    (event) => {\n      props?.onError?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoProgress = useCallback(\n    (event) => {\n      props?.onProgress?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoBandwidthUpdate = useCallback(\n    (event) => {\n      props?.onBandwidthUpdate?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoSeek = useCallback(\n    (event) => {\n      props?.onSeek?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoEnd = useCallback(\n    (event) => {\n      props?.onEnd?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onTimedMetadata = useCallback(\n    (event) => {\n      props?.onTimedMetadata?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoFullscreenPlayerWillPresent = useCallback(\n    (event) => {\n      props?.onFullscreenPlayerWillPresent?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoFullscreenPlayerDidPresent = useCallback(\n    (event) => {\n      props?.onFullscreenPlayerDidPresent?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoFullscreenPlayerWillDismiss = useCallback(\n    (event) => {\n      props?.onFullscreenPlayerWillDismiss?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoFullscreenPlayerDidDismiss = useCallback(\n    (event) => {\n      props?.onFullscreenPlayerDidDismiss?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onReadyForDisplay = useCallback(\n    (event) => {\n      if (props.audioOnly && showPoster) {\n        setShowPoster((prev: any) => ({ ...prev, showPoster: false }));\n      } else {\n        props?.onReadyForDisplay?.(event.nativeEvent);\n      }\n    },\n    [props, showPoster]\n  );\n\n  const onPlaybackStalled = useCallback(\n    (event) => {\n      props?.onPlaybackStalled?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onPlaybackResume = useCallback(\n    (event) => {\n      props?.onPlaybackResume?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onPlaybackRateChange = useCallback(\n    (event) => {\n      props?.onPlaybackRateChange?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoExternalPlaybackChange = useCallback(\n    (event) => {\n      props?.onExternalPlaybackChange?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onAudioBecomingNoisy = useCallback(() => {\n    props?.onAudioBecomingNoisyfnc?.();\n  }, [props]);\n\n  const onPictureInPictureStatusChanged = useCallback(\n    (event) => {\n      props?.onPictureInPictureStatusChanged?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onRestoreUserInterfaceForPictureInPictureStop = useCallback(\n    (event) => {\n      props?.onRestoreUserInterfaceForPictureInPictureStop?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onAudioFocusChanged = useCallback(\n    (event) => {\n      props?.onAudioFocusChanged?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onVideoBuffer = useCallback(\n    (event) => {\n      props?.onBuffer?.(event.nativeEvent);\n    },\n    [props]\n  );\n\n  const onGetLicense = useCallback(\n    (event) => {\n      if (props.drm && props.drm.getLicense instanceof Function) {\n        const data = event.nativeEvent;\n        if (data && data.spc) {\n          const getLicenseOverride = props.drm.getLicense(\n            data.spc,\n            data.contentId,\n            data.spcBase64,\n            props\n          );\n          const getLicensePromise = Promise.resolve(getLicenseOverride); // Handles both scenarios, getLicenseOverride being a promise and not.\n          getLicensePromise\n            .then((result) => {\n              if (result !== undefined) {\n                NativeModules.VideoManager.setLicenseResult(\n                  result,\n                  findNodeHandle(refVideo.current)\n                );\n              } else {\n                NativeModules.VideoManager.setLicenseError &&\n                  NativeModules.VideoManager.setLicenseError(\n                    'Empty license result',\n                    findNodeHandle(refVideo.current)\n                  );\n              }\n            })\n            .catch((error) => {\n              NativeModules.VideoManager.setLicenseError &&\n                NativeModules.VideoManager.setLicenseError(\n                  error,\n                  findNodeHandle(refVideo.current)\n                );\n            });\n        } else {\n          NativeModules.VideoManager.setLicenseError &&\n            NativeModules.VideoManager.setLicenseError(\n              'No spc received',\n              findNodeHandle(refVideo.current)\n            );\n        }\n      }\n    },\n    [props]\n  );\n\n  const getViewManagerConfig = useCallback((viewManagerName) => {\n    if (!NativeModules.UIManager.getViewManagerConfig) {\n      return NativeModules.UIManager[viewManagerName];\n    }\n    return NativeModules.UIManager.getViewManagerConfig(viewManagerName);\n  }, []);\n\n  const resizeMode = props?.resizeMode;\n  const source = resolveAssetSource(props?.source) || {};\n  const shouldCache = !source?.__packager_asset;\n\n  let uri = source.uri || '';\n  if (uri && uri.match(/^\\//)) {\n    uri = `file://${uri}`;\n  }\n\n  if (!uri) {\n    console.warn('Trying to load empty source.');\n  }\n\n  const isNetwork = !!(uri && uri.match(/^https?:/));\n  const isAsset = !!(\n    uri &&\n    uri.match(/^(assets-library|ipod-library|file|content|ms-appx|ms-appdata):/)\n  );\n\n  let nativeResizeMode;\n  const VideoPlayerInstance = getViewManagerConfig('VideoPlayer');\n\n  if (resizeMode === VideoResizeMode.stretch) {\n    nativeResizeMode = VideoPlayerInstance.Constants.ScaleToFill;\n  } else if (resizeMode === VideoResizeMode.contain) {\n    nativeResizeMode = VideoPlayerInstance.Constants.ScaleAspectFit;\n  } else if (resizeMode === VideoResizeMode.cover) {\n    nativeResizeMode = VideoPlayerInstance.Constants.ScaleAspectFill;\n  } else {\n    nativeResizeMode = VideoPlayerInstance.Constants.ScaleNone;\n  }\n\n  const nativeProps = Object.assign({}, props);\n  Object.assign(nativeProps, {\n    style: [\n      {\n        overflow: 'hidden',\n      },\n      nativeProps?.style,\n    ],\n    resizeMode: nativeResizeMode,\n    src: {\n      uri,\n      isNetwork,\n      isAsset,\n      shouldCache,\n      type: source.type || '',\n      mainVer: source.mainVer || 0,\n      patchVer: source.patchVer || 0,\n      requestHeaders: source.headers ? stringsOnlyObject(source.headers) : {},\n    },\n    onVideoLoadStart,\n    onVideoLoad,\n    onVideoError,\n    onVideoProgress,\n    onVideoSeek,\n    onVideoEnd,\n    onVideoBuffer,\n    onVideoBandwidthUpdate,\n    onTimedMetadata,\n    onVideoAudioBecomingNoisy: onAudioBecomingNoisy,\n    onVideoExternalPlaybackChange,\n    onVideoFullscreenPlayerWillPresent,\n    onVideoFullscreenPlayerDidPresent,\n    onVideoFullscreenPlayerWillDismiss,\n    onVideoFullscreenPlayerDidDismiss,\n    onReadyForDisplay,\n    onPlaybackStalled,\n    onPlaybackResume,\n    onPlaybackRateChange,\n    onAudioFocusChanged,\n    onAudioBecomingNoisy,\n    onGetLicense:\n      nativeProps.drm && nativeProps?.drm?.getLicense && onGetLicense,\n    onPictureInPictureStatusChanged,\n    onRestoreUserInterfaceForPictureInPictureStop,\n  });\n\n  return {\n    nativeProps,\n    seek,\n    save,\n    presentFullscreenPlayer,\n    dismissFullscreenPlayer,\n    restoreUserInterfaceForPictureInPictureStopCompleted,\n    refVideo,\n    showPoster,\n  };\n}\n"]}